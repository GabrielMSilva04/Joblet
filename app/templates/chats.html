{% extends "layout.html" %}

{% block content %}
<h2 class="text-2xl font-bold mb-6">My Chats</h2>

<div class="grid grid-cols-1 gap-4">
    <!-- Chats as a Customer -->
    <div>
        <h3 class="text-xl font-semibold mb-2">Chats as a Customer</h3>
        <ul class="bg-base-200 rounded-lg p-4 shadow-md">
            {% for chat in customer_chats %}
                <li class="mb-3">
                    <a
                        href="{% url 'chat_view' chat.booking.id %}"
                        class="flex justify-between items-center hover:bg-base-300 p-2 rounded-lg"
                    >
                        <div>
                            <p class="font-semibold">{{ chat.booking.service.title }}</p>
                            <p class="text-sm text-gray-500">
                                Chat with {{ chat.booking.service.provider.profile.user.username }}
                            </p>
                        </div>
                        <span class="text-sm text-gray-400">
                            {{ chat.created_at|date:"M d, Y H:i" }}
                        </span>
                    </a>
                </li>
            {% empty %}
                <p class="text-gray-500">You have no chats as a customer.</p>
            {% endfor %}
        </ul>
    </div>

    <!-- Chats as a Provider -->
    <div>
        <h3 class="text-xl font-semibold mb-2">Chats as a Provider</h3>
        <ul class="bg-base-200 rounded-lg p-4 shadow-md">
            {% for chat in provider_chats %}
                <li class="mb-3">
                    <a
                        href="{% url 'chat_view' chat.booking.id %}"
                        class="flex justify-between items-center hover:bg-base-300 p-2 rounded-lg"
                    >
                        <div>
                            <p class="font-semibold">{{ chat.booking.service.title }}</p>
                            <p class="text-sm text-gray-500">
                                Chat with {{ chat.booking.customer.user.username }}
                            </p>
                        </div>
                        <span class="text-sm text-gray-400">
                            {{ chat.created_at|date:"M d, Y H:i" }}
                        </span>
                    </a>
                </li>
            {% empty %}
                <p class="text-gray-500">You have no chats as a provider.</p>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}