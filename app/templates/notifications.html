{% extends "layout.html" %}

{% block content %}
    <div class="p-4">
        <h1 class="text-3xl font-bold mb-4">Notificações</h1>
        <div class="space-y-4">
            {% for notification in notifications %}
                <div class="bg-white p-4 rounded-lg shadow-md {% if notification.read %}opacity-50{% endif %}">
                    <p>{{ notification.message }}</p>
                    <small class="text-gray-500">{{ notification.created_at|date:"M d, Y H:i" }}</small>

                    {% if notification.action_required and notification.booking %}
                        <div class="flex gap-2 mt-2">
                            <form method="POST" action="{% url 'approve_booking' notification.id %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-sm btn-success">Aprovar</button>
                            </form>
                            <form method="POST" action="{% url 'reject_booking' notification.id %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-sm btn-danger">Rejeitar</button>
                            </form>
                        </div>
                    {% endif %}
                </div>
            {% empty %}
                <p class="text-gray-500">Você não tem notificações.</p>
            {% endfor %}
        </div>
    </div>
{% endblock %}
