{% extends "layout.html" %}

{% block content %}
<div class="chat-container">
    <h2 class="text-2xl font-bold mb-4">Chat for Booking: {{ booking.service.title }}</h2>

    <div class="chat-messages bg-gray-100 p-4 rounded-lg max-h-96 overflow-y-auto">
        {% for message in messages %}
            <div class="message mb-2 {% if message.sender == request.user.profile %}text-right{% else %}text-left{% endif %}">
                <p class="font-semibold">{{ message.sender.user.username }}</p>
                <p class="text-sm bg-gray-200 inline-block rounded-lg p-2">{{ message.content }}</p>
                <p class="text-xs text-gray-500">{{ message.timestamp|date:"M d, Y H:i" }}</p>
            </div>
        {% endfor %}
    </div>

    <form method="POST" class="mt-4">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Send</button>
    </form>
</div>
{% endblock %}